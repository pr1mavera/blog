(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{338:function(v,_,t){"use strict";t.r(_);var l=t(0),s=Object(l.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("p",[v._v("请求模型：两个端点、两个动作"),t("br"),v._v("\nclient --- 请求 ---\x3e Server"),t("br"),v._v("\nclient <--- 响应 --- Server")]),v._v(" "),t("ul",[t("li",[v._v("请求：告诉服务器想要的资源")]),v._v(" "),t("li",[v._v("响应：服务器找到这份资源发出响应")])]),v._v(" "),t("p",[t("strong",[v._v("模型简单，机制复杂！！")])]),v._v(" "),t("h2",{attrs:{id:"浏览器行为与http协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器行为与http协议"}},[v._v("#")]),v._v(" 浏览器行为与HTTP协议")]),v._v(" "),t("p",[v._v("通信流程：")]),v._v(" "),t("ol",[t("li",[v._v("输入网址并回车")]),v._v(" "),t("li",[v._v("解析域名")]),v._v(" "),t("li",[v._v("浏览器发送HTTP请求")]),v._v(" "),t("li",[v._v("服务器处理请求")]),v._v(" "),t("li",[v._v("服务器返回HTML响应")]),v._v(" "),t("li",[v._v("浏览器处理HTML页面")]),v._v(" "),t("li",[v._v("继续请求其他资源")])]),v._v(" "),t("p",[v._v("客户端请求去google.com -> 翻越内外网关卡防火墙(路由器、直接接互联网，物理介质上需遵循PPP协议) -> 将域名通过DNS服务器翻译成IP -> 请求 -> google.com服务器集群(通过反向代理公用多个服务器)，收到请求，解析请求，生成资源并返回 -> 响应 -> 浏览器渲染")]),v._v(" "),t("h2",{attrs:{id:"http协议语义详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http协议语义详解"}},[v._v("#")]),v._v(" HTTP协议语义详解")]),v._v(" "),t("ul",[t("li",[v._v("http是超文本传输协议，从服务器传输到本地浏览器的传输协议(大家都应该遵守的规范)，如网站的图片，CSS，JS。。。")]),v._v(" "),t("li",[v._v("http协议是由从客户端到服务器的请求和服务器到客户端的响应进行的"),t("strong",[v._v("约束")]),v._v("和"),t("strong",[v._v("规范")])])]),v._v(" "),t("p",[v._v("HTTP/0.9(1991) --------\x3e HTTP/1.0(1996) ---\x3e HTTP/1.1(1999) ---------------\x3e HTTP/2(2015)")]),v._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[v._v("注意")]),v._v(" "),t("p",[v._v("http2向前兼容，HTTP3不向前兼容")])]),v._v(" "),t("h3",{attrs:{id:"了解tcp-ip协议栈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#了解tcp-ip协议栈"}},[v._v("#")]),v._v(" 了解TCP/IP协议栈")]),v._v(" "),t("table",[t("tr",[t("td",{attrs:{colspan:"1"}},[v._v("IOS/OSI分层"),t("br"),v._v("（标准化协议）")]),v._v(" "),t("td",{attrs:{colspan:"1"}},[v._v("TCP/IP分层"),t("br"),v._v("（事实上的协议）")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("各层作用")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("各层协议")])]),v._v(" "),t("tr",[t("td",{attrs:{colspan:"1"}},[v._v("应用层")]),v._v(" "),t("td",{attrs:{colspan:"1",rowspan:"3"}},[v._v("应用层")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("为应用程序提供服务")]),v._v(" "),t("td",{attrs:{colspan:"5",rowspan:"3"}},[v._v("HTTP、Telnet、FTP、TFTP、DNS、SMTP")])]),v._v(" "),t("tr",[t("td",{attrs:{colspan:"1"}},[v._v("表示层")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("格式转化、数据加密")])]),v._v(" "),t("tr",[t("td",{attrs:{colspan:"1"}},[v._v("会话层")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("建立、管理和维护会话")])]),v._v(" "),t("tr",[t("td",{attrs:{colspan:"1"}},[v._v("传输层")]),v._v(" "),t("td",{attrs:{colspan:"1"}},[v._v("传输层")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("建立、管理和维护端到端连接")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("TCP、UDP")])]),v._v(" "),t("tr",[t("td",{attrs:{colspan:"1"}},[v._v("网络层")]),v._v(" "),t("td",{attrs:{colspan:"1"}},[v._v("网络层")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("IP选址及路由选择")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("IP、ICMP（ping）、RIP、IGMP")])]),v._v(" "),t("tr",[t("td",{attrs:{colspan:"1"}},[v._v("数据链路层")]),v._v(" "),t("td",{attrs:{colspan:"1"}},[v._v("数据链路层")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("介质访问、链路管理")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("ARP 与 RARP（用于维护MAC与IP的关系）、IEEE802.3、PPP、CSMA/CD")])]),t("tr",[t("td",{attrs:{colspan:"1"}},[v._v("物理层")]),v._v(" "),t("td",{attrs:{colspan:"1"}},[v._v("物理层")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("物理层")]),v._v(" "),t("td",{attrs:{colspan:"5"}},[v._v("FE自协商、Manchester、MLT-3、4A、PAM5")])])]),v._v(" "),t("ol",[t("li",[v._v("应用层\n"),t("ul",[t("li",[v._v("为用户提供所需要的各种服务，如：HTTP、FTP、DNS、SMTP(e-mail) 。。。")])])]),v._v(" "),t("li",[v._v("传输层(socket)\n"),t("ul",[t("li",[v._v("为应用层实体提供端到端的通信功能，保证数据包的顺序传送及数据的完整性")]),v._v(" "),t("li",[v._v("该层定义了两个主要的协议：传输控制协议(TCP，可靠) 和 用户数据报协议(UDP，不可靠)")])])]),v._v(" "),t("li",[v._v("网络层\n"),t("ul",[t("li",[v._v("主要解决主机到主机的通信问题，IP协议是网际互联层最重要的协议"),t("br"),v._v("\n---------------- 以下为硬件层 ----------------\n物理层 数据链路层")])])]),v._v(" "),t("li",[v._v("网络接口层\n"),t("ul",[t("li",[v._v("负责监视数据在主机和网络之间的交换")])])])]),v._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[v._v("注意：")]),v._v(" "),t("ul",[t("li",[v._v("目前普遍应用版本 "),t("code",[v._v("HTTP1.1")])]),v._v(" "),t("li",[v._v("正在逐步向 "),t("code",[v._v("HTTP2")]),v._v(" 迁移")]),v._v(" "),t("li",[t("code",[v._v("HTTP")]),v._v(" 默认端口号为 "),t("code",[v._v("80")])]),v._v(" "),t("li",[t("code",[v._v("HTTPS")]),v._v(" 默认端口号为 "),t("code",[v._v("443")])])])]),v._v(" "),t("h3",{attrs:{id:"http-的工作过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-的工作过程"}},[v._v("#")]),v._v(" HTTP 的工作过程")]),v._v(" "),t("p",[v._v("一次HTTP操作成为一个事务(分步串行操作，要么全部做完，要么算失败)，包括请求和响应，")]),v._v(" "),t("ol",[t("li",[v._v("首先客户端与服务器需要建立连接。只要单击某个超级链接，HTTP的工作开始")]),v._v(" "),t("li",[v._v("建立连接后，客户端发送一个请求给服务器，请求方式的格式为：统一资源标识符(URL)、协议版本号，后面是MIME信息包括请求装饰符、客户端信息和可能的内容(请求报文)")]),v._v(" "),t("li",[v._v("服务器接到请求，给予相应的响应(响应报文)，格式为一个状态行，")]),v._v(" "),t("li",[v._v("客户端接收到服务器返回的信息，浏览器显示，客户端与服务器断开连接")])]),v._v(" "),t("p",[v._v("!! "),t("em",[v._v("注意")]),v._v("："),t("strong",[v._v("如果在以上过程中任何一步出现错误，那么错误信息将返回到客户端")]),v._v(" !!")]),v._v(" "),t("h3",{attrs:{id:"请求与响应"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#请求与响应"}},[v._v("#")]),v._v(" 请求与响应")]),v._v(" "),t("ul",[t("li",[v._v("HTTP请求组成：请求行、消息报头(k-v格式)、请求正文")]),v._v(" "),t("li",[v._v("HTTP响应组成：状态行、消息报头、响应正文")]),v._v(" "),t("li",[v._v("请求行组成：以一个方法符号开头(GET、POST 。。。) ，后面跟着请求的URL和协议的版本")]),v._v(" "),t("li",[v._v("状态行组成：服务器HTTP协议的版本，服务器发回的响应状态代码(404、200 。。。) 和其文本描述")])]),v._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[v._v("注意：")]),v._v(" "),t("p",[v._v("请求：")]),v._v(" "),t("ol",[t("li",[v._v("请求行的结束，两个字符：\n"),t("ul",[t("li",[v._v("windows:  "),t("strong",[v._v("回车符")]),v._v("(/r)，"),t("strong",[v._v("换行符")]),v._v("(/n)")]),v._v(" "),t("li",[v._v("Linux:  "),t("strong",[v._v("换行符")]),v._v("(/n)")])])]),v._v(" "),t("li",[v._v("报文头和报文体的连接：连续两个"),t("strong",[v._v("回车符")]),v._v("和"),t("strong",[v._v("换行符")])])]),v._v(" "),t("p",[v._v("响应：")]),v._v(" "),t("ol",[t("li",[v._v("响应头和响应体的连接： "),t("strong",[v._v("7f")]),v._v(" (ASCII码上的删除符号，是不可见字符)")]),v._v(" "),t("li",[v._v("响应体的结束： "),t("strong",[v._v("0")]),v._v(" (ASCII码上的空字符，表示文本文件的结束)")])])]),v._v(" "),t("h3",{attrs:{id:"http-的请求方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-的请求方法"}},[v._v("#")]),v._v(" HTTP 的请求方法")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("GET")]),v._v(" 请求获取 request-URL 所标识的资源")]),v._v(" "),t("li",[t("code",[v._v("POST")]),v._v(" 在 request-URL 所标识的资源后附加新的数据")]),v._v(" "),t("li",[t("code",[v._v("HEAD")]),v._v(" 请求获取由 request-URL 所标识的资源的响应消息报头")]),v._v(" "),t("li",[t("code",[v._v("PUT")]),v._v(" 请求服务器存储一个资源，并用 request-URL 作为其标识")]),v._v(" "),t("li",[t("code",[v._v("DELETE")]),v._v(" 请求服务器删除 request-URL 所标识的资源")]),v._v(" "),t("li",[t("code",[v._v("CONNECT")]),v._v(" 请求服务器回送收到的请求信息，主要用户测试或诊断")]),v._v(" "),t("li",[t("code",[v._v("OPTIONS")]),v._v(" HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器")]),v._v(" "),t("li",[t("code",[v._v("TRACE")]),v._v(" 请求查询服务器的性能，或者查询与资源相关的选项和需求")])]),v._v(" "),t("h3",{attrs:{id:"http-状态码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-状态码"}},[v._v("#")]),v._v(" HTTP 状态码")]),v._v(" "),t("p",[v._v("由三位数字组成，第一位定义响应的类别，且有5种可能：")]),v._v(" "),t("ul",[t("li",[v._v("1xx: 表示请求收到，但是未处理完，为了不超时，返回一个指示信息")]),v._v(" "),t("li",[v._v("2xx: 成功 -- 表示请求已被成功接收、理解、接受\n"),t("ul",[t("li",[v._v("200: 请求被正常处理")]),v._v(" "),t("li",[v._v("204: 请求被受理但是没有资源可以返回")]),v._v(" "),t("li",[v._v("206: 客户端只是请求资源的一部分，服务器只对请求的部分资源进行 "),t("code",[v._v("GET")]),v._v(" 方法，相应报文中通过Content-Range指定范围的资源")])])]),v._v(" "),t("li",[v._v("3xx: 重定向 -- 要完成请求必须进行更进一步的操作\n"),t("ul",[t("li",[v._v("301: 永久性重定向")]),v._v(" "),t("li",[v._v("302: 临时重定向")]),v._v(" "),t("li",[v._v("303: 与302状态码有相似功能，只是他希望客服端在请求一个URL的时候，能通过 "),t("code",[v._v("GET")]),v._v(" 方法重定向到另一个URL上")]),v._v(" "),t("li",[v._v("304: 发送附带条件的请求时，条件不满足时返回，与重定向无关")]),v._v(" "),t("li",[v._v("307: 临时重定向，与302类似，只是强制要求使用 "),t("code",[v._v("POST")]),v._v(" 方法")])])]),v._v(" "),t("li",[v._v("4xx: 客户端错误 -- 请求有语法错误或请求无法实现\n"),t("ul",[t("li",[v._v("400: 请求报文语法有误，服务器无法识别")]),v._v(" "),t("li",[v._v("401: 请求需要认证")]),v._v(" "),t("li",[v._v("403: 请求的对应资源禁止被访问")]),v._v(" "),t("li",[v._v("404: 服务器无法找到对应资源")])])]),v._v(" "),t("li",[v._v("5xx: 服务却错误 -- 服务却未能实现合理的请求，范围很广：从web服务器 到 API接口 到 数据库错误 到 网关错误\n"),t("ul",[t("li",[v._v("500: 服务器内部错误")]),v._v(" "),t("li",[v._v("503: 服务器正忙")])])])]),v._v(" "),t("h3",{attrs:{id:"常见报头"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见报头"}},[v._v("#")]),v._v(" 常见报头")]),v._v(" "),t("ul",[t("li",[v._v("通用首部字段（请求报文与响应报文都会使用的首部字段）\n"),t("ul",[t("li",[v._v("Date: 创建报文时间")]),v._v(" "),t("li",[v._v("Connection: 连接的管理")]),v._v(" "),t("li",[v._v("Cache-Control: 缓存的控制")]),v._v(" "),t("li",[v._v("Transfer-Encoding: 报文主体的传输编码方式")])])]),v._v(" "),t("li",[v._v("请求首部字段（请求报文会使用的首部字段）\n"),t("ul",[t("li",[v._v("Host: 请求资源所在服务器")]),v._v(" "),t("li",[v._v("Referer: 来源，当前页面的上一页")]),v._v(" "),t("li",[v._v("Accept: 可处理的媒体类型")]),v._v(" "),t("li",[v._v("Accept-Encoding: 可接受的内容编码（响应体是否要压缩）")]),v._v(" "),t("li",[v._v("Accept-Language: 可接受的自然语言")]),v._v(" "),t("li",[v._v("User-Agent: 识别浏览器版本（在之前浏览器实现规范不统一的时代，为了兼容性处理）")])])]),v._v(" "),t("li",[v._v("响应首部字段（响应报文会使用的首部字段）\n"),t("ul",[t("li",[v._v("Accept-Ranges: 可接受的字节范围")]),v._v(" "),t("li",[v._v("Location: 令客户端重新定向到的URI")]),v._v(" "),t("li",[v._v("Server: HTTP服务器的安装信息")])])]),v._v(" "),t("li",[v._v("实体首部字段（请求报文与响应报文的的实体部分使用的首部字段）\n"),t("ul",[t("li",[v._v("Allow: 资源可支持的HTTP方法")]),v._v(" "),t("li",[v._v("Content-Type: 实体主类的类型")]),v._v(" "),t("li",[v._v("Content-Encoding: 实体主体适用的编码方式")]),v._v(" "),t("li",[v._v("Content-Language: 实体主体的自然语言")]),v._v(" "),t("li",[v._v("Content-Length: 实体主体的的字节数")]),v._v(" "),t("li",[v._v("Content-Range: 实体主体的位置范围，一般用于发出部分请求时使用")])])])]),v._v(" "),t("h2",{attrs:{id:"cookie-session"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie-session"}},[v._v("#")]),v._v(" cookie & Session")]),v._v(" "),t("p",[v._v("为解决服务器对于客户端的身份识别问题，相当于建立客户端到服务器的持久会话状态，客户端第一次访问服务器时，服务器通过Set-Cookie将信息存至客户端浏览器，当下次客户端访问服务器时会带上这些Cookie，服务器就可以识别客户端的信息了 ----\x3e "),t("strong",[v._v("维护会话，识别身份")])]),v._v(" "),t("ul",[t("li",[t("code",[v._v("Cookie")]),v._v(" 是保存在客户端的小段文本，随客户端每个请求发送该URL下所有 "),t("code",[v._v("cookie")]),v._v(" 到服务器")]),v._v(" "),t("li",[t("code",[v._v("Session")]),v._v(" 是保存在服务器端的(相当于一个小型数据库) ，通过唯一的值 "),t("code",[v._v("sessionID")]),v._v(" 来区别每一个用户， "),t("code",[v._v("sessionID")]),v._v(" 随每个连接请求发送到服务器，服务器根据 "),t("code",[v._v("sessionID")]),v._v(" 来识别客户端，通过 "),t("code",[v._v("session")]),v._v(" 的 "),t("code",[v._v("key")]),v._v(" 获取 "),t("code",[v._v("session")]),v._v(" 的值")])]),v._v(" "),t("h2",{attrs:{id:"http缓存机制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http缓存机制"}},[v._v("#")]),v._v(" HTTP缓存机制")]),v._v(" "),t("p",[v._v("如果是相同的URL，缓存直接使用副本响应访问请求，而不是向源服务器再次发送请求")]),v._v(" "),t("p",[v._v("客户端 ------ GET xxx ------\x3e 服务器"),t("br"),v._v("\n客户端 <------ 200 OK ------ 服务器"),t("br"),v._v("\n客户端 ------ GET xxx ------\x3e 服务器"),t("br"),v._v("\n客户端 <------ 304 Not Modify ------ 服务器")]),v._v(" "),t("ul",[t("li",[v._v("Date: 当前请求资源的国际标准时间(比北京时间晚8小时)")]),v._v(" "),t("li",[v._v("Expires: 包含日期/时间， 即在此时候之后，响应过期")]),v._v(" "),t("li",[v._v("Etag: 类似于资源指纹，每一次给定URL中的资源更改，则一定要生成新的Etag值")]),v._v(" "),t("li",[v._v("Last-Modified: 资源最后一次修改时间")])]),v._v(" "),t("p",[v._v("优点：")]),v._v(" "),t("ol",[t("li",[v._v("减少响应延迟")]),v._v(" "),t("li",[v._v("减少网络带宽消耗")])]),v._v(" "),t("p",[v._v("缓存策略：")]),v._v(" "),t("ul",[t("li",[v._v("强制缓存：服务器通知浏览器一个缓存时间，在缓存时间内，下次请求，直接接用缓存，不在时间内，执行比较缓存策略")]),v._v(" "),t("li",[v._v("比较缓存：将缓存信息的 "),t("code",[v._v("Etag")]),v._v(" (If-None-Match) 和 "),t("code",[v._v("Last-Modified")]),v._v(" (If-Modified-Since) 通过请求发送给服务器，由服务器校验，返回304状态码时，浏览器直接使用缓存")])]),v._v(" "),t("p",[v._v("具体流程："),t("br"),v._v("\n第一次请求：\n"),t("img",{attrs:{src:"/blog/img/cs/once.jpeg",alt:"第一次请求"}}),v._v("\n第二次请求：\n"),t("img",{attrs:{src:"/blog/img/cs/twice.jpeg",alt:"第二次请求"}})])])}),[],!1,null,null,null);_.default=s.exports}}]);