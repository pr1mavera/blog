(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{368:function(t,v,_){"use strict";_.r(v);var s=_(0),a=Object(s.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"http2-协议分析"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#http2-协议分析"}},[t._v("#")]),t._v(" HTTP2 协议分析")]),t._v(" "),_("p",[t._v("与 HTTP 比较：")]),t._v(" "),_("ul",[_("li",[t._v("相同：没有修改 HTTP 的语义，没有改变 HTTP 方法、状态码、URL 和 标头字段等核心概念")]),t._v(" "),_("li",[t._v("不同：\n"),_("ol",[_("li",[t._v("引入了一个新的二进制分帧层，修改了数据格式化规则，实现了多路复用")]),t._v(" "),_("li",[t._v("修改了在客户端与服务器之间传输的方式（http 是文本，http2 是二进制数据）")]),t._v(" "),_("li",[t._v("无法与之前的 http/1.x 服务器和客户端向后兼容")])])]),t._v(" "),_("li",[t._v("特点：\n"),_("ol",[_("li",[t._v("使用二进制传输，更高效，更紧凑")]),t._v(" "),_("li",[t._v("对报头（header）压缩，降低开销")]),t._v(" "),_("li",[t._v("多路复用，一个网络连接实现并行请求")]),t._v(" "),_("li",[t._v("服务器主动推送，减少请求的延迟")]),t._v(" "),_("li",[t._v("默认使用加密")])])])]),t._v(" "),_("h3",{attrs:{id:"分帧层"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#分帧层"}},[t._v("#")]),t._v(" 分帧层")]),t._v(" "),_("p",[t._v("基于 二进制分帧层 的 HTTP2 协议，是在 "),_("strong",[t._v("传输层")]),t._v(" 与 "),_("strong",[t._v("应用层")]),t._v(" 之间做了一层 二进制帧（Binary Framing）")]),t._v(" "),_("ul",[_("li",[t._v("HTTP: 明文 ---tcp---\x3e 数据传输")]),t._v(" "),_("li",[t._v("HTTPS: 明文 ---SSL加密---\x3e 密文 ---tcp---\x3e 数据传输")]),t._v(" "),_("li",[t._v("HTTP2: 明文 ---二进制分帧层---\x3e 二进制数据 ---SSL加密---\x3e 密文 ---tcp---\x3e 数据传输")])]),t._v(" "),_("p",[t._v("包装了数据的请求和响应：\n"),_("table",[_("tr",[_("td",{attrs:{colspan:"1"}},[t._v("HTTP/1.1")]),t._v(" "),_("td",{attrs:{colspan:"1"}},[t._v("HTTP/2")])]),t._v(" "),_("tr",[_("td",{attrs:{colspan:"1"}},[t._v("请求（响应）行")]),t._v(" "),_("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("头帧 HEADERS frame")])]),t._v(" "),_("tr",[_("td",{attrs:{colspan:"1"}},[t._v("请求（响应）头")])]),t._v(" "),_("tr",[_("td",{attrs:{colspan:"1"}},[t._v("请求（响应）体")]),t._v(" "),_("td",{attrs:{colspan:"1"}},[t._v("数据帧 DATA frame")])])])]),t._v(" "),_("h3",{attrs:{id:"多路复用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#多路复用"}},[t._v("#")]),t._v(" 多路复用")]),t._v(" "),_("p",[t._v("部分解决了 http/1.1 的队首阻塞问题：")]),t._v(" "),_("ul",[_("li",[t._v("HTTP : 串行的，下一个请求需要等待上一个请求完成")]),t._v(" "),_("li",[t._v("HTTP2 : 并行的，将请求和响应拆成 "),_("strong",[t._v("多个数据包")]),t._v(" 交错发送")])]),t._v(" "),_("h3",{attrs:{id:"服务器推送"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#服务器推送"}},[t._v("#")]),t._v(" 服务器推送")]),t._v(" "),_("p",[t._v("当客户端请求网站首页时，首页 page.html，其中有资源一 script.js，资源二 style.css")]),t._v(" "),_("ul",[_("li",[t._v("HTTP : 需将首页 page.html 请求至客户端并解析完毕，才知道需要相应资源 script.js 、 style.css")]),t._v(" "),_("li",[t._v("HTTP2 : 在请求了首页 page.html 之后，服务端通过将首页转换成二进制之后捕获到了资源 script.js 、 style.css，则会直接将资源推送至客户端")])]),t._v(" "),_("h3",{attrs:{id:"伪头字段"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#伪头字段"}},[t._v("#")]),t._v(" 伪头字段")]),t._v(" "),_("p",[t._v("HTTP2 伪头：HTTP2 中内置的特殊的，以 "),_("code",[t._v(":")]),t._v(" 开头的key，作用是代替 请求行、响应行 的信息")]),t._v(" "),_("ul",[_("li",[_("code",[t._v(":method")]),t._v(" : 目标URL模式部分（请求）（GET）")]),t._v(" "),_("li",[_("code",[t._v(":scheme")]),t._v(" : 目标URL模式部分（请求）（HTTP/1.1）")]),t._v(" "),_("li",[_("code",[t._v(":authority")]),t._v(" : 目标URL认证部分（请求）（/test）")]),t._v(" "),_("li",[_("code",[t._v(":path")]),t._v(" : 目标URL的路径和查询部分（请求）（Host: www.google.com.cn）")]),t._v(" "),_("li",[_("code",[t._v(":status")]),t._v(" : 响应头中的HTTP状态码部分（响应）\n"),_("img",{attrs:{src:"/blog/img/cs/http2.jpg",alt:"http2伪头"}})])]),t._v(" "),_("h2",{attrs:{id:"http3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#http3"}},[t._v("#")]),t._v(" HTTP3")]),t._v(" "),_("ul",[_("li",[t._v("运行在 QUIC 之上的 HTTP 协议被称为 HTTP/3 (HTTP-over-QUIC)，QUIC 是一个跨层协议(一部分在传输层上，一部分在应用层上)")]),t._v(" "),_("li",[t._v("QUIC 协议(Quick UDP Internet Connection)基于 UDP，正是看中了 UDP 的速度与效率。同时 QUIC 也整合了 TCP、TLS 和 HTTP/2 的优点，并加以优化。")]),t._v(" "),_("li",[t._v("特点：\n"),_("ol",[_("li",[t._v("减少了握手的延迟(1-RTT 或 0-RTT)")]),t._v(" "),_("li",[t._v("多路复用，并且没有 TCP 的阻塞问题")]),t._v(" "),_("li",[t._v("连接迁移，(主要是在客户端)当由 Wifi 转移到 4G 时，连接不 会被断开")])])]),t._v(" "),_("li",[t._v("HTTP/3 与 HTTP/1.1 和 HTTP/2 没有直接的关系，也不是 http/2 的扩展")]),t._v(" "),_("li",[t._v("HTTP/3将会是一个全新的WEB协议")]),t._v(" "),_("li",[t._v("HTTP/3目前处于制订和测试阶段")])])])}),[],!1,null,null,null);v.default=a.exports}}]);