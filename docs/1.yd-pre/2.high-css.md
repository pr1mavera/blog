---
title: 高级CSS
date: 2019-06-20
tags: 
 - 阿灯
---

## HTML5陀螺仪
+ G-sensor：加速度计，只能检测轴向的线性运动。
+ 陀螺仪：又叫角速度传感器，它的测量物理量是偏转，倾斜时的转动角速度。陀螺仪可以对转动、偏转的动作做很好的测量，可以精确分析出使用者的实际动作。

### 角度：
![陀螺仪角度](/blog/img/yideng/tuoluoyi.jpeg)
alpha: ( 0, 360 )
beta: ( -180, 180 )
gamma: ( -90, 90 )

### API:
1. deviceorientation
    设备的物理方向信息，表示为一系列本地坐标的旋角
2. devicemotion
    提供设备的加速信息
3. compassneedscalibration
    用于通知web站点使用罗盘信息校准上述事件

### 摇一摇
```js
var speed = 30; // speed
var x =  y = z = lastX = lastY = lastZ = 0
function deviceMotionHandler (e) {
    var acceleration = e.accelerationIncludingGravity;
    x = acceleration.x;
    y = acceleration.y;
    z = acceleration.z;
    if (Math.abs(x - lastX) > speed || Math.abs(y - lastY) > speed || Math.abs(z - lastZ) > speed || ) {
        alert(1);
    }
}
```

## CSS3 3D模型
* [淘宝造物节](https://github.com/yllg/ZWJ 'https://github.com/yllg/ZWJ')

## 结合交互事件（touch）

## CSS3D库
css3d-engine

## js类库
Parallax.js

## CSS3高级使用技巧

### 早期双飞翼布局 / CSS HACK
双飞翼布局又叫圣杯布局

### 移动端px与rem转换适配方案

### Reset的选择
* 杀伤力太大，在真实开发中尽量不要使用

+ reset.css 重置
+ Normalize.css 修复
+ Neat.css融合

H5页面需要整体加：
```css
html {
    box-sizing: border-box;
}
*, *:before, *:after {
    box-sizing: inherit;
}
```

### 自制iconfont与常用字体排版
* [纯css绘制图标](https://cssicon.space/#/ 'https://cssicon.space/#/')

### css代码检查与团队项目规范
[cssHINT](https://www.npmjs.com/package/csshint 'https://www.npmjs.com/package/csshint')
[cssLINT](http://csslint.net/# 'http://csslint.net/#')

1. 不要使用多个class选择元素，如a.foo.boo，这在ie6及以下不能正确解析
2. 移除空的css规则，如a{}
3. 正确的使用显示属性，如display:inline不要和width，height，float，margin,padding同时使用，display:inline-block不要和float同时使用等
4. 避免过多的浮动，当浮动次数超过十次时，会显示警告
5. 避免使用过多的字号，当字号声明超过十种时，显示警告
6. 避免使用过多web字体，当使用超过五次时，显示警告
7. 避免使用id作为样式选择器
8. 标题元素只定义一次
9. 使用width:100%时要小心
10. 属性值为0时不要写单位
11. 各浏览器专属的css属性要有规范，
    例如.foo{-moz-border-radius:5px;border-radius:5px}
12. 避免使用看起来像正则表达式的css3选择器
13. 遵守盒模型规则


### css绘制特殊图形，高级技巧

### BFC IFC GFC FFC
Box: CSS布局的基本单位Box 是 CSS 布局的对象和基本单位， 直观点来说，就是一个页面是由很多个 Box 组成的。元素的类型和 display 属性，决定了这个 Box 的类型。 不同类型的 Box， 会参与不同的 Formatting Context（一个决定如何渲染文档的容器），因此Box内的元素会以不同的方式渲染。
+ **block-level box**: display 属性为 block, list-item, table 的元素，会生成 block-level box。并且参与 block fomatting context
+ **inline-level box**: display 属性为 inline, inline-block, inline-table 的元素，会生成 inline-level box。并且参与 inline formatting context

**Formatting context** 是 W3C CSS2.1 规范中的一个概念。它是页面中的一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。最常见的 Formatting context 有 Block fomatting context（简称BFC）和 Inline formatting context（简称IFC）。

会产生BFC的元素：
+ 根元素
+ float属性不为none
+ position为absolute或fixed
+ display为inline-block, table-cell, table-caption, flex, inline-flex
+ overflow不为visible

场景一：**自适应两栏布局**

对应规则：两个BFC之间不会重叠，它们是相互独立的

```html
<style>
    body {
        width: 300px;
        position: relative;
    }
    .aside {
        width: 100px;
        height: 150px;
        float: left;
        background: #f66;
    }
    .main {
        height: 200px;
        background: #fcc;
        /* 加一句 overflow：hidden; 触发main进行BFC布局，使得与aside浮动布局分离 */
        overflow: hidden;
    }
</style>
<body>
    <div class="aside"></div>
    <div class="main"></div>
</body>
```
加上 `overflow: hidden;` 之前：
![加overflow: hidden;之前](/blog/img/yideng/not-BFC.jpg)  
加上 `overflow: hidden;` 之后：
![加overflow: hidden;之后](/blog/img/yideng/BFC.jpg)

场景二：**清除内部浮动**

对应规则：计算BFC的高度时，浮动元素也参与计算
```html
<style>
    .par {
        border: 5px solid #fcc;
        width: 300px;
        /* 加一句 overflow：hidden; 让浮动元素也参与计算 */
        overflow: hidden;
    }
    .child {
        border: 5px solid #f66;
        width:100px;
        height: 100px;
        float: left;
    }
</style>
<body>
    <div class="par">
        <div class="child"></div>
        <div class="child"></div>
    </div>
</body>
```
![清除浮动](/blog/img/yideng/fudong.jpg)

BFC布局原则总结：
1. 两个BFC之间不会重叠，它们是相互独立的
2. 计算BFC的高度时，浮动元素也参与计算